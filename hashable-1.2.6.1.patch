Only in hashable-1.2.6.1: .cabal-sandbox
Only in hashable-1.2.6.1: cabal.sandbox.config
diff -ur hashable-1.2.6.1.orig/Data/Hashable/Class.hs hashable-1.2.6.1/Data/Hashable/Class.hs
--- hashable-1.2.6.1.orig/Data/Hashable/Class.hs	2017-06-22 04:07:04.000000000 +0000
+++ hashable-1.2.6.1/Data/Hashable/Class.hs	2018-01-22 13:34:20.002092706 +0000
@@ -149,7 +149,7 @@
 import qualified Data.ByteString.Short.Internal as BSI
 #endif
 
-#ifdef VERSION_integer_gmp
+#if defined(VERSION_integer_gmp)
 
 # if MIN_VERSION_integer_gmp(1,0,0)
 #  define MIN_VERSION_integer_gmp_1_0_0
@@ -158,8 +158,12 @@
 import GHC.Exts (Int(..))
 import GHC.Integer.GMP.Internals (Integer(..))
 # if defined(MIN_VERSION_integer_gmp_1_0_0)
+#  if defined(ghcjs_HOST_OS)
+import GHC.Integer.GMP.Internals (bigNatToInteger)
+#  else
 import GHC.Exts (sizeofByteArray#)
 import GHC.Integer.GMP.Internals (BigNat(BN#))
+#  endif
 # endif
 #endif
 
@@ -377,12 +381,16 @@
 
 #if defined(MIN_VERSION_integer_gmp_1_0_0)
 instance Hashable BigNat where
+#if defined(ghcjs_HOST_OS)
+    hashWithSalt salt bn = hashWithSalt salt (bigNatToInteger bn)
+#else
     hashWithSalt salt (BN# ba) = hashByteArrayWithSalt ba 0 numBytes salt
                                  `hashWithSalt` size
       where
         size     = numBytes `quot` SIZEOF_HSWORD
         numBytes = I# (sizeofByteArray# ba)
 #endif
+#endif
 
 #if MIN_VERSION_base(4,8,0)
 instance Hashable Natural where
@@ -394,13 +402,12 @@
     hashWithSalt salt (NatJ# bn)  = hashWithSalt salt bn
 # else
     hash (Natural n) = hash n
-
     hashWithSalt salt (Natural n) = hashWithSalt salt n
 # endif
 #endif
 
 instance Hashable Integer where
-#if defined(VERSION_integer_gmp)
+#if defined(VERSION_integer_gmp) && !defined(ghcjs_HOST_OS)
 # if defined(MIN_VERSION_integer_gmp_1_0_0)
     hash (S# n)   = (I# n)
     hash (Jp# bn) = hash bn
@@ -907,5 +914,3 @@
 instance Show1 Hashed where
   liftShowsPrec sp _ d (Hashed a _) = showsUnaryWith sp "hashed" d a
 #endif
-
-
Only in hashable-1.2.6.1/Data/Hashable: Class.hs.orig
